<!DOCTYPE html >
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Maximum Futility</title>
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.2/dist/bootstrap-table.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
<h1>Maximum Futility</h1>
<div>
    View <a href="/franchises">franchise data</a>
</div>
<div>
    <table id="city-table" class="table table-striped table-sm fs-6" data-show-multi-sort="true" data-show-columns="true">
        <thead>
        <tr>
            <th colspan="1" rowspan="2" scope="col" data-sortable="true" data-searchable="true">City</th>
            <th colspan="1" rowspan="2" scope="col" data-sortable="true">Seasons</th>
            <th colspan="2" scope="col">Titles</th>
            <th colspan="2">Made Finals</th>
            <th colspan="2">Made Playoffs</th>
            <th colspan="2">Advanced in Playoffs</th>
            <th colspan="2">Best in Division</th>
            <th colspan="2">Best in Conference</th>
            <th colspan="2">Best Overall</th>
            <th colspan="2">Worst in Division</th>
            <th colspan="2">Worst in Conference</th>
            <th colspan="2">Worst Overall</th>
        </tr>
        <tr>
            <th scope="col" data-sortable="true">#</th>
            <th scope="col" data-sortable="true" data-sorter="percentSorter">%</th>
            <th scope="col" data-sortable="true">#</th>
            <th scope="col" data-sortable="true" data-sorter="percentSorter">%</th>
            <th scope="col" data-sortable="true">#</th>
            <th scope="col" data-sortable="true" data-sorter="percentSorter">%</th>
            <th scope="col" data-sortable="true">#</th>
            <th scope="col" data-sortable="true" data-sorter="percentSorter">%</th>
            <th scope="col" data-sortable="true">#</th>
            <th scope="col" data-sortable="true" data-sorter="percentSorter">%</th>
            <th scope="col" data-sortable="true">#</th>
            <th scope="col" data-sortable="true" data-sorter="percentSorter">%</th>
            <th scope="col" data-sortable="true">#</th>
            <th scope="col" data-sortable="true" data-sorter="percentSorter">%</th>
            <th scope="col" data-sortable="true">#</th>
            <th scope="col" data-sortable="true" data-sorter="percentSorter">%</th>
            <th scope="col" data-sortable="true">#</th>
            <th scope="col" data-sortable="true" data-sorter="percentSorter">%</th>
            <th scope="col" data-sortable="true">#</th>
            <th scope="col" data-sortable="true" data-sorter="percentSorter">%</th>
        </tr>
        </thead>
        <!--/*@thymesVar id="franchises" type="kotlin.collections.List<mabersold.models.City>"*/-->
        <tbody>
            <tr th:each="city: ${cities}">
                <!--/*@thymesVar id="franchise" type="mabersold.models.City"*/-->
                <td th:text="${city.metroArea.displayName}"></td>
                <td th:text="${city.totalSeasons}"></td>
                <td th:text="${city.totalChampionships}"></td>
                <td th:text="${#numbers.formatPercent(city.championshipsPerSeason, 1, 2)}"></td>
                <td th:text="${city.championshipAppearances}"></td>
                <td th:text="${#numbers.formatPercent(city.championshipAppearancesPerSeason, 1, 2)}"></td>
                <td th:text="${city.playoffAppearances}"></td>
                <td th:text="${#numbers.formatPercent(city.playoffAppearancesPerSeason, 1, 2)}"></td>
                <td th:text="${city.advancedInPlayoffs}"></td>
                <td th:text="${#numbers.formatPercent(city.advancedInPlayoffsPerSeason, 1, 2)}"></td>
                <td th:text="${city.bestInDivision}"></td>
                <td th:text="${#numbers.formatPercent(city.bestInDivisionPerSeason, 1, 2)}"></td>
                <td th:text="${city.bestInConference}"></td>
                <td th:text="${#numbers.formatPercent(city.bestInConferencePerSeason, 1, 2)}"></td>
                <td th:text="${city.bestOverall}"></td>
                <td th:text="${#numbers.formatPercent(city.bestOverallPerSeason, 1, 2)}"></td>
                <td th:text="${city.worstInDivision}"></td>
                <td th:text="${#numbers.formatPercent(city.worstInDivisionPerSeason, 1, 2)}"></td>
                <td th:text="${city.worstInConference}"></td>
                <td th:text="${#numbers.formatPercent(city.worstInConferencePerSeason, 1, 2)}"></td>
                <td th:text="${city.worstOverall}"></td>
                <td th:text="${#numbers.formatPercent(city.worstOverallPerSeason, 1, 2)}"></td>
            </tr>
        </tbody>
    </table>
</div>

<script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://unpkg.com/bootstrap-table@1.21.2/dist/bootstrap-table.min.js"></script>
<script src="https://unpkg.com/bootstrap-table@1.21.2/dist/extensions/multiple-sort/bootstrap-table-multiple-sort.js"></script>

<script>
    $(function() {
        $('#city-table').bootstrapTable()
    })
</script>

<script>
    function percentSorter(a, b) {
        const aNumber = parseFloat(a.replace('%', ''));
        const bNumber = parseFloat(b.replace('%', ''));

        if (aNumber > bNumber) {
            return 1;
        } else if (bNumber > aNumber) {
            return -1;
        } else {
            return 0;
        }
    }
</script>


</body>
</html>
